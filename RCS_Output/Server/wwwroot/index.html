<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RCS - Dashboard Điều Khiển</title>

    <!-- LOGO -->
    <link rel="icon" type="image/png" href="./assets/logo.png">

    <!-- Thư viện giao diện & Icon -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/input.css">
    <link rel="stylesheet" href="css/button.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    
    <!-- Thư viện SignalR (Bắt buộc phải có trước main.js) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/microsoft-signalr/6.0.7/signalr.min.js"></script>

    
    <!-- Cấu hình Tailwind để hỗ trợ Dark Mode -->
    <script>
        tailwind.config = {
            darkMode: 'class',
        }
    </script>

    <!-- SCRIPT CHỐNG NHÁY SÁNG -->
    <script>
        if (localStorage.getItem('theme') === 'dark' || (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
            document.documentElement.classList.add('dark');
        } else {
            document.documentElement.classList.remove('dark');
        }
    </script>

    <style>
        body { font-family: 'Inter', sans-serif; }
        /* Hiệu ứng chuyển động mượt cho Sidebar */
        .sidebar-transition { transition: width 0.3s cubic-bezier(0.4, 0, 0.2, 1); }
        
        /* Khi sidebar đóng lại, ẩn chữ đi */
        .sidebar-collapsed .nav-text { display: none; }
        .sidebar-collapsed .logo-text { display: none; }
        .sidebar-collapsed .nav-item { justify-content: center; padding-left: 0; padding-right: 0; }
        
        /* Scrollbar đẹp hơn */
        ::-webkit-scrollbar { width: 6px; height: 6px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 3px; }
        ::-webkit-scrollbar-thumb:hover { background: #94a3b8; }
    </style>
</head>

<body class="bg-slate-50 dark:bg-slate-900 text-slate-800 dark:text-slate-200 transition-colors duration-300">
    
    <button id="show-header-btn" class="hidden fixed top-2 right-4 z-50 bg-white/90 dark:bg-slate-800/90 backdrop-blur text-blue-600 dark:text-blue-400 p-2 rounded-full shadow-lg border border-slate-200 dark:border-slate-700 hover:scale-110 transition-all duration-300" title="Hiện Menu">
        <i class="fas fa-chevron-down text-xl"></i>
    </button>

    <div id="login-screen" class="fixed inset-0 z-[100] flex items-center justify-center bg-slate-900 overflow-hidden font-sans">
        <div class="absolute top-[-10%] left-[-10%] w-[500px] h-[500px] bg-blue-600/30 rounded-full blur-[120px] animate-blob"></div>
        <div class="absolute bottom-[-10%] right-[-10%] w-[500px] h-[500px] bg-purple-600/30 rounded-full blur-[120px] animate-blob animation-delay-2000"></div>
        <div class="absolute inset-0 bg-[url('https://grainy-gradients.vercel.app/noise.svg')] opacity-20"></div> <div class="relative bg-white/10 dark:bg-slate-800/50 backdrop-blur-2xl border border-white/20 dark:border-slate-700 shadow-2xl rounded-3xl w-full max-w-4xl flex overflow-hidden m-4 transition-all duration-500 hover:shadow-blue-500/10">
            
            <div class="hidden md:flex w-1/2 bg-gradient-to-br from-blue-600/90 to-indigo-900/90 p-12 flex-col justify-between relative overflow-hidden">
                <div class="absolute top-0 right-0 w-64 h-64 bg-white/10 rounded-full blur-3xl -mr-16 -mt-16"></div>
                
                <div class="relative z-10">
                    <div class="flex items-center gap-3 mb-6">
                        <div class="w-10 h-10 bg-white/20 rounded-lg flex items-center justify-center backdrop-blur-sm border border-white/30">
                            <i class="fas fa-network-wired text-white text-lg"></i>
                        </div>
                        <span class="text-white font-bold text-xl tracking-wider">RCS PRO</span>
                    </div>
                    
                    <h2 class="text-4xl font-extrabold text-white leading-tight mb-4">
                        Kiểm soát <br>
                        <span class="text-blue-200">Không giới hạn.</span>
                    </h2>
                    <p class="text-blue-100 text-sm leading-relaxed opacity-90">
                        Hệ thống quản trị và giám sát từ xa mạnh mẽ, đa nền tảng, cung cấp các công cụ cần thiết để theo dõi và điều khiển các thiết bị mục tiêu một cách hiệu quả và an toàn.
                    </p>
                </div>

                <div class="relative z-10 space-y-3 mt-8">
                    <div class="flex items-center gap-3 text-white/80 text-xs">
                        <i class="fas fa-check-circle text-green-400"></i> <span>Real-time Monitoring</span>
                    </div>
                    <div class="flex items-center gap-3 text-white/80 text-xs">
                        <i class="fas fa-check-circle text-green-400"></i> <span>Đa nền tảng</span>
                    </div>
                </div>

                <div class="text-[10px] text-blue-200/60 mt-auto">
                    © 2025 Powered by .NET 8
                </div>
            </div>

            <div class="w-full md:w-1/2 p-8 md:p-12 bg-white dark:bg-slate-900 flex flex-col justify-center">
                
                <div class="text-center md:text-left mb-8">
                    <h3 class="text-2xl font-bold text-slate-800 dark:text-white mb-2">Chào mừng trở lại!</h3>
                    <p class="text-slate-500 dark:text-slate-400 text-sm">Vui lòng đăng nhập để truy cập Dashboard.</p>
                </div>

                <form id="login-form" class="space-y-5">
                    
                    <div class="space-y-1">
                        <label class="text-xs font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wide ml-1">Server Address</label>
                        <div class="relative group">
                            <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                <i class="fas fa-server text-slate-400 group-focus-within:text-blue-500 transition-colors"></i>
                            </div>
                            <input id="server-ip" type="text" value="localhost" 
                                class="block w-full pl-10 pr-3 py-3 border border-slate-200 dark:border-slate-700 rounded-xl leading-5 bg-slate-50 dark:bg-slate-800 text-slate-900 dark:text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500 transition-all duration-300 sm:text-sm font-mono" 
                                placeholder="IP Address (e.g. 192.168.1.5)" required>
                        </div>
                    </div>

                    <div class="space-y-1">
                        <label class="text-xs font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wide ml-1">Tài khoản</label>
                        <div class="relative group">
                            <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                <i class="fas fa-user text-slate-400 group-focus-within:text-blue-500 transition-colors"></i>
                            </div>
                            <input id="username-input" type="text" 
                                class="block w-full pl-10 pr-3 py-3 border border-slate-200 dark:border-slate-700 rounded-xl leading-5 bg-slate-50 dark:bg-slate-800 text-slate-900 dark:text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500 transition-all duration-300 sm:text-sm" 
                                placeholder="Username" required>
                        </div>
                    </div>

                    <div class="space-y-1">
                        <label class="text-xs font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wide ml-1">Mật khẩu</label>
                        <div class="relative group">
                            <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                <i class="fas fa-lock text-slate-400 group-focus-within:text-blue-500 transition-colors"></i>
                            </div>
                            <input id="password-input" type="password" 
                                class="block w-full pl-10 pr-3 py-3 border border-slate-200 dark:border-slate-700 rounded-xl leading-5 bg-slate-50 dark:bg-slate-800 text-slate-900 dark:text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500 transition-all duration-300 sm:text-sm" 
                                placeholder="••••••••" required>
                        </div>
                    </div>

                    <div id="login-error" class="hidden flex items-center gap-2 p-3 rounded-lg bg-red-50 dark:bg-red-900/20 border border-red-100 dark:border-red-800 text-red-600 dark:text-red-400 text-xs animate-shake">
                        <i class="fas fa-exclamation-triangle"></i>
                        <span>Thông tin đăng nhập không chính xác.</span>
                    </div>

                    <button type="submit" id="login-btn" class="group relative w-full flex justify-center py-3.5 px-4 border border-transparent rounded-xl text-sm font-bold text-white bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-all duration-300 shadow-lg shadow-blue-500/30 hover:shadow-blue-500/50 active:scale-[0.98]">
                        <span id="btn-text" class="flex items-center">
                            Truy cập Dashboard <i class="fas fa-arrow-right ml-2 group-hover:translate-x-1 transition-transform"></i>
                        </span>
                        <div id="btn-loader" class="hidden ml-2 w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"></div>
                    </button>

                </form>
                
                <div class="mt-6 text-center">
                    <a href="#" class="text-xs text-slate-400 hover:text-blue-500 transition-colors">Quên mật khẩu? Liên hệ Admin.</a>
                </div>
            </div>
        </div>
    </div>

    <div id="app" class="flex h-screen w-full hidden opacity-0 transition-opacity duration-500">
        
        <aside id="sidebar" class="sidebar-transition w-64 flex flex-col bg-white/80 dark:bg-slate-900/90 backdrop-blur-2xl border border-white/40 dark:border-slate-700/60 shadow-2xl rounded-[2rem] shrink-0 overflow-hidden m-4 h-[calc(100vh-2rem)] z-50 transition-all duration-500 ease-in-out">
    
    <div class="h-24 flex items-center justify-between px-6 border-b border-slate-200/50 dark:border-slate-700/50 shrink-0">
        
        <div class="flex items-center min-w-0"> 
            <div class="w-10 h-10 bg-blue-600 text-white rounded-2xl flex items-center justify-center shrink-0 shadow-lg shadow-blue-500/30 nav-section-title flex flex-col ml-3 logo-text overflow-hidden whitespace-nowrap transition-all duration-300 origin-left">
                <i class="fas fa-network-wired text-lg"></i>
            </div>

            <div class="flex flex-col ml-3 logo-text overflow-hidden whitespace-nowrap transition-all duration-300 origin-left">
                <span class="font-black text-xl text-slate-800 dark:text-white tracking-tight leading-none">RCS Pro</span>
                <span class="text-[10px] font-bold text-blue-500 tracking-widest uppercase mt-1">System</span>
            </div>

        </div>

        <button id="sidebar-toggle" aria-label="Toggle Sidebar" class="w-8 h-8 flex items-center justify-center rounded-lg text-slate-400 hover:text-blue-600 hover:bg-blue-50 dark:hover:bg-slate-800 transition-all ml-auto shrink-0">
            <i class="fas fa-bars text-xl"></i>
        </button>
    </div>

    <nav class="flex-1 overflow-y-auto overflow-x-hidden py-4 px-3 custom-scrollbar group/nav">
        
        <p class="px-4 text-[10px] font-extrabold text-slate-400 uppercase tracking-widest mb-2 opacity-70 whitespace-nowrap overflow-hidden transition-all duration-300 nav-text">Giám sát</p>
        
        <button data-view="applications" class="tab-btn nav-item w-full flex items-center px-3 py-3.5 rounded-2xl transition-all duration-300 group relative overflow-hidden active">
            <div class="absolute inset-0 bg-gradient-to-r from-blue-600 to-indigo-600 opacity-0 group-[.active]:opacity-100 transition-opacity duration-300 rounded-2xl"></div>
            <i class="fas fa-layer-group w-8 text-center text-lg text-blue-500 group-hover:text-blue-600 dark:group-hover:text-blue-400 group-[.active]:text-white relative z-10 transition-colors duration-300"></i>
            <span class="nav-text text-sm font-bold ml-3 text-slate-600 dark:text-slate-300 group-hover:text-slate-900 dark:group-hover:text-white group-[.active]:text-white relative z-10 whitespace-nowrap transition-all duration-300">Ứng Dụng</span>
        </button>

        <button data-view="processes" class="tab-btn nav-item w-full flex items-center px-3 py-3.5 rounded-2xl transition-all duration-300 group relative overflow-hidden hover:bg-white/60 dark:hover:bg-slate-800/50">
            <div class="absolute inset-0 bg-gradient-to-r from-emerald-500 to-teal-500 opacity-0 group-[.active]:opacity-100 transition-opacity duration-300 rounded-2xl"></div>
            <i class="fas fa-microchip w-8 text-center text-lg text-emerald-500 group-hover:text-emerald-600 group-[.active]:text-white relative z-10 transition-colors"></i>
            <span class="nav-text text-sm font-bold ml-3 text-slate-600 dark:text-slate-300 group-hover:text-slate-900 dark:group-hover:text-white group-[.active]:text-white relative z-10 whitespace-nowrap">Tiến Trình</span>
        </button>

        <button data-view="screenshot" class="tab-btn nav-item w-full flex items-center px-3 py-3.5 rounded-2xl transition-all duration-300 group relative overflow-hidden hover:bg-white/60 dark:hover:bg-slate-800/50">
            <div class="absolute inset-0 bg-gradient-to-r from-purple-500 to-pink-500 opacity-0 group-[.active]:opacity-100 transition-opacity duration-300 rounded-2xl"></div>
            <i class="fas fa-camera w-8 text-center text-lg text-purple-500 group-hover:text-purple-600 group-[.active]:text-white relative z-10 transition-colors"></i>
            <span class="nav-text text-sm font-bold ml-3 text-slate-600 dark:text-slate-300 group-hover:text-slate-900 dark:group-hover:text-white group-[.active]:text-white relative z-10 whitespace-nowrap">Màn Hình</span>
        </button>

        <button data-view="webcam" class="tab-btn nav-item w-full flex items-center px-3 py-3.5 rounded-2xl transition-all duration-300 group relative overflow-hidden hover:bg-white/60 dark:hover:bg-slate-800/50">
            <div class="absolute inset-0 bg-gradient-to-r from-rose-500 to-orange-500 opacity-0 group-[.active]:opacity-100 transition-opacity duration-300 rounded-2xl"></div>
            <i class="fas fa-video w-8 text-center text-lg text-rose-500 group-hover:text-rose-600 group-[.active]:text-white relative z-10 transition-colors"></i>
            <span class="nav-text text-sm font-bold ml-3 text-slate-600 dark:text-slate-300 group-hover:text-slate-900 dark:group-hover:text-white group-[.active]:text-white relative z-10 whitespace-nowrap">Webcam</span>
        </button>

        <div class="h-px bg-slate-200 dark:bg-slate-700 mx-4 my-2"></div>

        <p class="px-4 text-[10px] font-extrabold text-slate-400 uppercase tracking-widest mb-2 opacity-70 whitespace-nowrap overflow-hidden transition-all duration-300 nav-text">Điều khiển</p>

        <button data-view="keylogger" class="tab-btn nav-item w-full flex items-center px-3 py-3.5 rounded-2xl transition-all duration-300 group relative overflow-hidden hover:bg-white/60 dark:hover:bg-slate-800/50">
            <div class="absolute inset-0 bg-gradient-to-r from-amber-500 to-yellow-500 opacity-0 group-[.active]:opacity-100 transition-opacity duration-300 rounded-2xl"></div>
            <i class="fas fa-keyboard w-8 text-center text-lg text-amber-500 group-hover:text-amber-600 group-[.active]:text-white relative z-10 transition-colors"></i>
            <span class="nav-text text-sm font-bold ml-3 text-slate-600 dark:text-slate-300 group-hover:text-slate-900 dark:group-hover:text-white group-[.active]:text-white relative z-10 whitespace-nowrap">Keylogger</span>
        </button>

        <button data-view="terminal" class="tab-btn nav-item w-full flex items-center px-3 py-3.5 rounded-2xl transition-all duration-300 group relative overflow-hidden hover:bg-white/60 dark:hover:bg-slate-800/50">
            <div class="absolute inset-0 bg-gradient-to-r from-slate-700 to-slate-900 opacity-0 group-[.active]:opacity-100 transition-opacity duration-300 rounded-2xl"></div>
            <i class="fas fa-terminal w-8 text-center text-lg text-slate-600 dark:text-slate-400 group-hover:text-slate-800 dark:group-hover:text-white group-[.active]:text-white relative z-10 transition-colors"></i>
            <span class="nav-text text-sm font-bold ml-3 text-slate-600 dark:text-slate-300 group-hover:text-slate-900 dark:group-hover:text-white group-[.active]:text-white relative z-10 whitespace-nowrap">Terminal</span>
        </button>

        <button data-view="automation" class="tab-btn nav-item w-full flex items-center px-3 py-3.5 rounded-2xl transition-all duration-300 group relative overflow-hidden hover:bg-white/60 dark:hover:bg-slate-800/50">
            <div class="absolute inset-0 bg-gradient-to-r from-indigo-500 to-violet-500 opacity-0 group-[.active]:opacity-100 transition-opacity duration-300 rounded-2xl"></div>
            <i class="fas fa-robot w-8 text-center text-lg text-indigo-500 group-hover:text-indigo-600 group-[.active]:text-white relative z-10 transition-colors"></i>
            <span class="nav-text text-sm font-bold ml-3 text-slate-600 dark:text-slate-300 group-hover:text-slate-900 dark:group-hover:text-white group-[.active]:text-white relative z-10 whitespace-nowrap">Tương tác</span>
        </button>

        <button data-view="system" class="tab-btn nav-item w-full flex items-center px-3 py-3.5 rounded-2xl transition-all duration-300 group relative overflow-hidden hover:bg-white/60 dark:hover:bg-slate-800/50">
            <div class="absolute inset-0 bg-gradient-to-r from-gray-500 to-gray-700 opacity-0 group-[.active]:opacity-100 transition-opacity duration-300 rounded-2xl"></div>
            <i class="fas fa-cog w-8 text-center text-lg text-gray-500 dark:text-gray-400 group-hover:text-gray-600 group-[.active]:text-white relative z-10 transition-colors"></i>
            <span class="nav-text text-sm font-bold ml-3 text-slate-600 dark:text-slate-300 group-hover:text-slate-900 dark:group-hover:text-white group-[.active]:text-white relative z-10 whitespace-nowrap">Hệ Thống</span>
        </button>

        <div class="h-px bg-slate-200 dark:bg-slate-700 mx-4 my-2"></div>

        <button data-view="about" class="tab-btn nav-item w-full flex items-center px-3 py-3.5 rounded-2xl transition-all duration-300 group relative overflow-hidden hover:bg-white/60 dark:hover:bg-slate-800/50">
            <div class="absolute inset-0 bg-gradient-to-r from-sky-400 to-blue-500 opacity-0 group-[.active]:opacity-100 transition-opacity duration-300 rounded-2xl"></div>
            <i class="fas fa-info-circle w-8 text-center text-lg text-sky-500 group-hover:text-sky-600 group-[.active]:text-white relative z-10 transition-colors"></i>
            <span class="nav-text text-sm font-medium ml-3 text-slate-500 dark:text-slate-400 group-hover:text-slate-900 dark:group-hover:text-white group-[.active]:text-white relative z-10 whitespace-nowrap">Giới Thiệu</span>
        </button>
    </nav>

    <div class="p-4 border-t border-slate-200/50 dark:border-slate-700/50 shrink-0">
        <div class="flex items-center p-2 rounded-2xl border border-white/50 dark:border-slate-600/50 shadow-sm backdrop-blur-sm bg-slate-50/50 dark:bg-slate-800/50 overflow-hidden whitespace-nowrap transition-all">
            <div class="w-8 h-8 rounded-full bg-indigo-100 dark:bg-indigo-900 text-indigo-600 dark:text-indigo-300 flex items-center justify-center font-bold text-xs shrink-0">AD</div>
            <div class="nav-text ml-3 overflow-hidden transition-all duration-300">
                <p class="text-xs font-bold text-slate-700 dark:text-slate-200 truncate">Administrator</p>
                <div class="flex items-center gap-1 mt-0.5">
                    <span class="w-1.5 h-1.5 rounded-full bg-green-500"></span>
                    <p class="text-[9px] text-green-600 dark:text-green-400 font-medium">Online</p>
                </div>
            </div>
        </div>
    </div>
</aside>

        <main class="flex-1 flex flex-col h-full overflow-hidden bg-slate-50 dark:bg-slate-900 relative transition-colors duration-300">
            
            <header id="main-header" class="h-20 shrink-0 flex justify-between items-center px-6 z-50 relative mt-2 mr-2 ml-4 bg-white/70 dark:bg-slate-900/80 backdrop-blur-2xl border border-white/40 dark:border-slate-700/60 shadow-lg rounded-3xl transition-all duration-300">
                
                <div class="flex items-center gap-5">
                    <div class="h-10 w-1.5 rounded-full bg-gradient-to-b from-blue-500 to-indigo-600 shadow-blue-300 dark:shadow-blue-900/50 shadow-md"></div> 
                    
                    <div>
                        <h1 class="text-xl font-bold tracking-tight text-slate-800 dark:text-white flex items-center gap-2" id="page-title">
                            <i class="fas fa-layer-group text-blue-600 dark:text-blue-400"></i> 
                            <span>Dashboard</span>
                        </h1>
                        
                        <div class="flex items-center gap-2 mt-0.5">
                            <span id="status-dot" class="w-2 h-2 rounded-full bg-green-500 animate-pulse"></span>
                            <p id="status-display" class="text-[11px] font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wide">
                                Hệ thống sẵn sàng
                            </p>
                        </div>
                    </div>
                </div>

                <div class="flex items-center gap-4 md:gap-6">
                    
                    <div class="hidden md:flex flex-col items-end relative z-[100]">
                        <span class="text-[9px] font-extrabold text-slate-400 uppercase tracking-widest mb-1.5 flex items-center gap-1.5">
                            <i class="fas fa-satellite-dish text-blue-500"></i> Target Agent
                        </span>
                        
                        <div class="relative" id="custom-agent-dropdown">
                            <button onclick="window.toggleAgentDropdown()" id="agent-trigger-btn" class="group flex items-center justify-between w-56 bg-white/50 dark:bg-slate-800/50 backdrop-blur-md border border-slate-200 dark:border-slate-600 text-slate-700 dark:text-slate-200 text-xs font-bold font-mono py-2 px-4 rounded-xl shadow-sm hover:shadow-md hover:border-blue-400 dark:hover:border-blue-500 transition-all duration-300">
                                <div class="flex items-center gap-3 overflow-hidden">
                                    <div id="agent-trigger-icon-box" class="w-2 h-2 rounded-full bg-red-500 shadow-[0_0_8px_rgba(239,68,68,0.6)]"></div>
                                    <span id="agent-trigger-text" class="truncate">Scanning...</span>
                                </div>
                                <i id="agent-trigger-arrow" class="fas fa-chevron-down text-[10px] text-slate-400 group-hover:text-blue-500 transition-transform duration-300"></i>
                            </button>

                            <div id="agent-dropdown-menu" class="hidden absolute top-full right-0 mt-3 w-72 bg-white/95 dark:bg-slate-900/95 backdrop-blur-xl border border-slate-100 dark:border-slate-700 rounded-2xl shadow-2xl overflow-hidden transform origin-top-right transition-all duration-200 scale-95 opacity-0">
                                <div class="px-4 py-3 border-b border-slate-100 dark:border-slate-700 bg-slate-50/50 dark:bg-slate-700/30 flex justify-between items-center">
                                    <span class="text-[10px] font-bold text-slate-400 uppercase">Connections</span>
                                    <span id="agent-count-badge" class="bg-blue-100 text-blue-600 dark:bg-blue-900 dark:text-blue-300 text-[10px] font-bold px-2 py-0.5 rounded-full">0</span>
                                </div>
                                <ul id="agent-list-container" class="max-h-60 overflow-y-auto py-2 custom-scrollbar">
                                    <li class="px-4 py-3 text-center text-xs text-slate-400 italic">Đang quét...</li>
                                </ul>
                                <div class="px-4 py-2 border-t border-slate-100 dark:border-slate-700 bg-slate-50/50 text-center">
                                    <button onclick="window.refreshAgentList()" id="btn-refresh-agents" class="text-[10px] text-blue-500 hover:text-blue-600 font-medium flex items-center justify-center gap-1 w-full hover:bg-white dark:hover:bg-slate-800 py-1.5 rounded-lg transition-colors">
                                        <i class="fas fa-sync-alt" id="icon-refresh"></i> Refresh List
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="h-8 w-px bg-slate-200 dark:bg-slate-700 mx-1"></div>

                    <div class="relative group flex flex-col items-center">
                        
                        <button id="theme-toggle" class="w-10 h-10 rounded-xl flex items-center justify-center text-slate-500 dark:text-yellow-400 bg-slate-100 dark:bg-slate-800 hover:ring-2 hover:ring-yellow-400 transition-all border border-transparent dark:border-slate-700" aria-label="Chế độ Sáng/Tối">
                            <i class="fas fa-moon hidden dark:inline text-lg"></i>
                            <i class="fas fa-sun dark:hidden text-lg"></i>
                        </button>
                    </div>

                    <button id="logout-btn" class="flex items-center gap-2 px-4 py-2 rounded-xl bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 hover:bg-red-100 dark:hover:bg-red-900/40 transition-colors border border-red-100 dark:border-red-900/30 group"> 
                        
                        <div id="logout-sign" class="dark:border-white transition-transform group-hover:-translate-x-1"> 
                            <svg viewBox="0 0 512 512" width="16" height="16" fill="currentColor"> 
                                <path d="M377.9 105.9L500.7 228.7c7.2 7.2 11.3 17.1 11.3 27.3s-4.1 20.1-11.3 27.3L377.9 406.1c-6.4 6.4-15 9.9-24 9.9c-18.7 0-33.9-15.2-33.9-33.9l0-62.1-128 0c-17.7 0-32-14.3-32-32l0-64c0-17.7 14.3-32 32-32l128 0 0-62.1c0-18.7 15.2-33.9 33.9-33.9c9 0 17.6 3.6 24 9.9zM160 96L96 96c-17.7 0-32 14.3-32 32l0 256c0 17.7 14.3 32 32 32l64 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-64 0c-53 0-96-43-96-96L0 128C0 75 43 32 96 32l64 0c17.7 0 32 14.3 32 32s-14.3 32-32 32z"></path>
                            </svg>
                        </div>
                        
                        <div id="logout-text" class="text-sm font-bold">Logout</div>
                    </button>

                </div>
            </header>

            <div id="content-area" class="flex-1 overflow-y-auto p-6 md:p-8 scroll-smooth relative">
                </div>
        </main>

        <div id="modal-container" class="fixed inset-0 bg-slate-900/60 backdrop-blur-sm z-[70] hidden flex items-center justify-center transition-opacity duration-300">
            <div id="custom-modal" class="bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 p-6 rounded-2xl shadow-2xl max-w-sm w-full transform transition-all duration-300 scale-100">
                <div class="flex items-center justify-center w-12 h-12 mx-auto bg-red-100 dark:bg-red-900/50 rounded-full mb-4">
                    <i class="fas fa-exclamation text-red-600 dark:text-red-400 text-xl"></i>
                </div>
                <h3 id="modal-title" class="text-lg font-bold text-center text-slate-800 dark:text-white mb-2">Xác Nhận</h3>
                <p id="modal-message" class="text-slate-500 dark:text-slate-400 text-center text-sm mb-6">Bạn có chắc chắn?</p>
                <div class="flex justify-center space-x-3">
                    <button id="modal-cancel-btn" class="px-5 py-2.5 bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-200 font-medium rounded-xl hover:bg-slate-200 dark:hover:bg-slate-600 transition-colors">Hủy</button>
                    <button id="modal-confirm-btn" class="px-5 py-2.5 bg-red-600 text-white font-medium rounded-xl hover:bg-red-700 shadow-lg shadow-red-200 dark:shadow-none transition-all">Xác Nhận</button>
                </div>
            </div>
        </div>

    </div>

    <script type="module" src="./Js/main.js"></script>
</body>
</html>